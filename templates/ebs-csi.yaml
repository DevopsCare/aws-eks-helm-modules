enableVolumeScheduling: true
enableVolumeResizing: true
enableVolumeSnapshot: false

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 100m
    memory: 128Mi

topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: ScheduleAnyway
  - maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: ScheduleAnyway

serviceAccount:
  controller:
    name: ebs-csi-controller-sa
    annotations:
      eks.amazonaws.com/role-arn: "${iam_role}"
  snapshot:
    name: ebs-snapshot-controller
    annotations:
      eks.amazonaws.com/role-arn: "${iam_role}"
  node:
    name: ebs-csi-node-sa
    annotations:
      eks.amazonaws.com/role-arn: "${iam_role}"

storageClasses:
  - name: ebs-sc
    annotations:
      storageclass.kubernetes.io/is-default-class: "true"
    volumeBindingMode: WaitForFirstConsumer
    reclaimPolicy: Delete
    parameters:
      csi.storage.k8s.io/fstype: xfs
      type: gp3
